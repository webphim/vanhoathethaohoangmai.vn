/*!
 * tn3 v1.4.0.101
 * http://tn3gallery.com/
 *
 * License
 * http://tn3gallery.com/license
 *
 * Date: 31 May, 2013 19:54:35 +0300
 */
(function(l){function t(c){var a=c.skinDir+"/"+c.skin,b=p[a];if(b){b.loaded?u.call(this,c,b.html):b.queue.push({c:this,s:c})}else{p[a]={loaded:false,queue:[{c:this,s:c}]};l.ajax({url:a+".html",dataType:"text",success:function(d){var e=p[a];e.loaded=true;e.html=d;for(d=0;d<e.queue.length;d++){u.call(e.queue[d].c,e.queue[d].s,e.html)}},dataFilter:function(d){return d=d.substring(d.indexOf("<body>")+6,d.lastIndexOf("</body>"))},error:function(){if(c.error){var d=l.Event("tn3_error");d.description="tn3 skin load error";c.error(d)}}})}return this}function u(b,a){this.each(function(){for(var d=l(this),c,f,e=a.indexOf("<img src=");e!=-1;){e+=10;f=a.indexOf('"',e);c=b.skinDir+"/"+a.substring(e,f);a=a.substr(0,e)+c+a.substr(f);e=a.indexOf("<img src=",e)}d.append(a);d.data("tn3").init(d,b.fullOnly)})}function s(e){var b=[],c=e.children(".tn3.album"),a,d;if(c.length>0){c.each(function(f){a=l(this);b[f]={title:a.find(":header").html()};l.extend(b[f],r(a));if(d=q(a)){b[f].imgs=d;if(!b[f].thumb){b[f].thumb=b[f].imgs[0].thumb}}})}else{if(d=q(e)){b[0]={imgs:d}}}return b}function q(d){var b=[],c,a;c=d.children("ol,ul").children("li");if(c.length>0){c.each(function(e){a=l(this);$firsta=a.find("a:not(.tn3 > a)").filter(":first");b[e]={title:a.find(":header").filter(":first").html()};if($firsta.length>0){b[e].img=$firsta.attr("href");b[e].thumb=$firsta.find("img").attr("src")}else{b[e].img=a.find("img").filter(":first").attr("src")}l.extend(b[e],r(a));b[e].alt=a.find("img").filter(":first").attr("alt")||b[e].title})}else{c=d.find("img");c.each(function(e){a=l(this);$at=a.parent("a");b[e]=$at.length==0?{title:a.attr("title"),img:a.attr("src")}:{title:a.attr("title"),img:$at.attr("href"),thumb:a.attr("src")};b[e].alt=a.attr("alt")||b[e].title})}if(b.length==0){return null}return b}function r(c){var a={};c=c.children(".tn3");var b;l.each(c,function(){b=l(this);a[b.attr("class").substr(4)]=b.html()});return a}function m(a){l('a[href^="#tn3-'+a+'"]').click(function(b){var c=g[a];b=l(b.currentTarget).attr("href");b=b.substr(b.indexOf("-",5)+1);b=b.split("-");switch(b[0]){case"next":c.cAlbum!=null&&c.show("next",b[1]=="fs");break;case"prev":c.cAlbum!=null&&c.show("prev",b[1]=="fs");break;default:c.cAlbum!=parseInt(b[0])?c.showAlbum(parseInt(b[0]),parseInt(b[1]),b[2]=="fs"):c.show(parseInt(b[1]),b[2]=="fs")}})}function k(){if(g.length==0){var a=l(".tn3gallery");a.length>0&&a.tn3({})}}if(function(e){for(var b,c,a=l.fn.jquery,d=a.split(".");e.length<d.length;){e.push(0)}for(b=0;b<e.length;b++){c=parseInt(d[b]);if(c>e[b]){return true}if(c<e[b]){return false}}return a===e.join(".")}([1,4,2])){var p={},g=[];l.fn.tn3=function(a){l.each(["skin","startWithAlbums","external"],function(c,d){var b=d.split(".");if(b.length>1&&a[b[0]]){delete a[b[0]][b[1]]}else{delete a[d]}});a=l.extend(true,{},l.fn.tn3.config,a);if(a.skin!=null){if(typeof a.skin=="object"){a.skinDir+="/"+a.skin[0];if(a.cssID==null){a.cssID=a.skin[0]}a.skin=a.skin[1]}else{a.skinDir+="/"+a.skin}}else{a.skin="tn3";a.skinDir+="/tn3";l.fn.tn3.dontLoad=true}if(a.cssID==null){a.cssID=a.skin==null?"tn3":a.skin}this.each(function(){var c=l(this);a.fullOnly?c.hide():c.css("visibility","hidden");var d=a.data?a.data:s(c);d=g.push(new l.fn.tn3.Gallery(d,a))-1;c.data("tn3",g[d]);for(var b=0;b<l.fn.tn3.plugins.length;b++){l.fn.tn3.plugins[b].init(c,a,g[d])}c.empty();m(d)});l.fn.tn3.dontLoad?u.call(this,a,a.skinDefault):t.call(this,a);return this};l.fn.tn3.plugins=[];l.fn.tn3.plugIn=function(b,a){l.fn.tn3.plugins.push({id:b,init:a})};l.fn.tn3.version="1.4.0.101";l.fn.tn3.config={data:null,skin:null,skinDir:"skins",skinDefault:'<div class="tn3-gallery"><div class="tn3-image"><div class="tn3-text-bg"><div class="tn3-image-title"></div><div class="tn3-image-description"></div></div><div class="tn3-next tn3_v tn3_o"></div><div class="tn3-prev tn3_v tn3_o"></div><div class="tn3-preloader tn3_h tn3_v"><img src="preload.gif"/></div><div class="tn3-timer"></div></div><div class="tn3-controls-bg tn3_rh"><div class="tn3-sep1"></div><div class="tn3-sep2"></div><div class="tn3-sep3"></div></div><div class="tn3-thumbs"></div><div class="tn3-fullscreen"></div><div class="tn3-show-albums"></div><div class="tn3-next-page"></div><div class="tn3-prev-page"></div><div class="tn3-play"></div><div class="tn3-count"></div><div class="tn3-albums"><div class="tn3-inalbums"><div class="tn3-album"></div></div><div class="tn3-albums-next"></div><div class="tn3-albums-prev"></div><div class="tn3-albums-close"></div></div></div>',cssID:null};l.fn.tn3.translations={};l.fn.tn3.translate=function(c,a){if(a){l.fn.tn3.translations[c]=a}else{var b=l.fn.tn3.translations[c];return b?b:c}};l(function(){setTimeout(k,1)})}else{alert("tn3gallery requires jQuery v1.4.2 or later!  You are using v"+l.fn.jquery)}})(jQuery);(function(a){a.fn.tn3utils=U={};U.shuffle=function(d){var f,h,g=d.length;if(g){for(;--g;){h=Math.floor(Math.random()*(g+1));f=d[h];d[h]=d[g];d[g]=f}}};a.extend(a.easing,{def:"easeOutQuad",swing:function(f,g,j,h,i){return a.easing[a.easing.def](f,g,j,h,i)},linear:function(f,g,j,h,i){return h*g/i+j},easeInQuad:function(f,g,j,h,i){return h*(g/=i)*g+j},easeOutQuad:function(f,g,j,h,i){return -h*(g/=i)*(g-2)+j},easeInOutQuad:function(f,g,j,h,i){if((g/=i/2)<1){return h/2*g*g+j}return -h/2*(--g*(g-2)-1)+j},easeInCubic:function(f,g,j,h,i){return h*(g/=i)*g*g+j},easeOutCubic:function(f,g,j,h,i){return h*((g=g/i-1)*g*g+1)+j},easeInOutCubic:function(f,g,j,h,i){if((g/=i/2)<1){return h/2*g*g*g+j}return h/2*((g-=2)*g*g+2)+j},easeInQuart:function(f,g,j,h,i){return h*(g/=i)*g*g*g+j},easeOutQuart:function(f,g,j,h,i){return -h*((g=g/i-1)*g*g*g-1)+j},easeInOutQuart:function(f,g,j,h,i){if((g/=i/2)<1){return h/2*g*g*g*g+j}return -h/2*((g-=2)*g*g*g-2)+j},easeInQuint:function(f,g,j,h,i){return h*(g/=i)*g*g*g*g+j},easeOutQuint:function(f,g,j,h,i){return h*((g=g/i-1)*g*g*g*g+1)+j},easeInOutQuint:function(f,g,j,h,i){if((g/=i/2)<1){return h/2*g*g*g*g*g+j}return h/2*((g-=2)*g*g*g*g+2)+j},easeInSine:function(f,g,j,h,i){return -h*Math.cos(g/i*(Math.PI/2))+h+j},easeOutSine:function(f,g,j,h,i){return h*Math.sin(g/i*(Math.PI/2))+j},easeInOutSine:function(f,g,j,h,i){return -h/2*(Math.cos(Math.PI*g/i)-1)+j},easeInExpo:function(f,g,j,h,i){return g==0?j:h*Math.pow(2,10*(g/i-1))+j},easeOutExpo:function(f,g,j,h,i){return g==i?j+h:h*(-Math.pow(2,-10*g/i)+1)+j},easeInOutExpo:function(f,g,j,h,i){if(g==0){return j}if(g==i){return j+h}if((g/=i/2)<1){return h/2*Math.pow(2,10*(g-1))+j}return h/2*(-Math.pow(2,-10*--g)+2)+j},easeInCirc:function(f,g,j,h,i){return -h*(Math.sqrt(1-(g/=i)*g)-1)+j},easeOutCirc:function(f,g,j,h,i){return h*Math.sqrt(1-(g=g/i-1)*g)+j},easeInOutCirc:function(f,g,j,h,i){if((g/=i/2)<1){return -h/2*(Math.sqrt(1-g*g)-1)+j}return h/2*(Math.sqrt(1-(g-=2)*g)+1)+j},easeInElastic:function(f,g,n,l,m){f=1.70158;var k=0,i=l;if(g==0){return n}if((g/=m)==1){return n+l}k||(k=m*0.3);if(i<Math.abs(l)){i=l;f=k/4}else{f=k/(2*Math.PI)*Math.asin(l/i)}return -(i*Math.pow(2,10*(g-=1))*Math.sin((g*m-f)*2*Math.PI/k))+n},easeOutElastic:function(f,g,n,l,m){f=1.70158;var k=0,i=l;if(g==0){return n}if((g/=m)==1){return n+l}k||(k=m*0.3);if(i<Math.abs(l)){i=l;f=k/4}else{f=k/(2*Math.PI)*Math.asin(l/i)}return i*Math.pow(2,-10*g)*Math.sin((g*m-f)*2*Math.PI/k)+l+n},easeInOutElastic:function(f,g,n,l,m){f=1.70158;var k=0,i=l;if(g==0){return n}if((g/=m/2)==2){return n+l}k||(k=m*0.3*1.5);if(i<Math.abs(l)){i=l;f=k/4}else{f=k/(2*Math.PI)*Math.asin(l/i)}if(g<1){return -0.5*i*Math.pow(2,10*(g-=1))*Math.sin((g*m-f)*2*Math.PI/k)+n}return i*Math.pow(2,-10*(g-=1))*Math.sin((g*m-f)*2*Math.PI/k)*0.5+l+n},easeInBack:function(f,g,l,j,k,i){if(i==undefined){i=1.70158}return j*(g/=k)*g*((i+1)*g-i)+l},easeOutBack:function(f,g,l,j,k,i){if(i==undefined){i=1.70158}return j*((g=g/k-1)*g*((i+1)*g+i)+1)+l},easeInOutBack:function(f,g,l,j,k,i){if(i==undefined){i=1.70158}if((g/=k/2)<1){return j/2*g*g*(((i*=1.525)+1)*g-i)+l}return j/2*((g-=2)*g*(((i*=1.525)+1)*g+i)+2)+l},easeInBounce:function(f,g,j,h,i){return h-a.easing.easeOutBounce(f,i-g,0,h,i)+j},easeOutBounce:function(f,g,j,h,i){return(g/=i)<1/2.75?h*7.5625*g*g+j:g<2/2.75?h*(7.5625*(g-=1.5/2.75)*g+0.75)+j:g<2.5/2.75?h*(7.5625*(g-=2.25/2.75)*g+0.9375)+j:h*(7.5625*(g-=2.625/2.75)*g+0.984375)+j},easeInOutBounce:function(f,g,j,h,i){if(g<i/2){return a.easing.easeInBounce(f,g*2,0,h,i)*0.5+j}return a.easing.easeOutBounce(f,g*2-i,0,h,i)*0.5+h*0.5+j}})})(jQuery);(function(g){g.fn.tn3.Gallery=function(b,a){this.data=b;this.config=g.extend(true,{},g.fn.tn3.Gallery.config,a);this.initialized=false;this.t=g.fn.tn3.translate;this.loader=new g.fn.tn3.External(a.external,this)};g.fn.tn3.Gallery.config={cssID:"tn3",active:[],inactive:[],iniAlbum:0,iniImage:0,imageClick:"next",startWithAlbums:false,autoplay:false,delay:7000,timerMode:"bar",timerSteps:300,timerStepChar:"&#8226;",isFullScreen:false,fullOnly:false,width:null,height:null,mouseWheel:true,keyNavigation:"fullscreen",timerOverStop:true,responsive:false,useNativeFullScreen:true,autohideControls:false,autohideOver:true,overFadeDuration:300,spinjs:null,image:{},thumbnailer:{},touch:{}};g.fn.tn3.Gallery.prototype={config:null,$c:null,$tn3:null,data:null,thumbnailer:null,imager:null,cAlbum:null,timer:null,items:null,initialized:null,n:null,albums:null,loader:null,fso:null,timerSize:null,special:null,areHidden:false,$inImage:null,isPlaying:false,cparent:null,spinner:null,showInit:false,init:function(e,b){this.$c=e;if(!(this.loader.reqs>0||this.data.length==0||b)){this.trigger("init_start");this.config.useNativeFullScreen=this.config.useNativeFullScreen&&d.supportsFullScreen;this.config.fullOnly&&this.$c.show();this.$c.css("visibility","visible");this.$tn3=this.$c.find("."+this.config.cssID+"-gallery");var a=this.config.initValues={width:this.$tn3.width(),height:this.$tn3.height()};this.$tn3.css("float","left");a.wDif=this.$tn3.outerWidth(true)-a.width;a.hDif=this.$tn3.outerHeight(true)-a.height;this.replaceMenu("tn3gallery.com","http://tn3gallery.com");var c=this;this.timer=new g.fn.tn3.Timer(this.$c,this.config.delay,this.config.timerSteps);this.$c.bind("tn3_timer_end",function(){c.show("next")});this.special={rv:[],rh:[],v:[],h:[],vi:[],hi:[],o:[],x:{}};this.parseLayout();this.center();g.each(this.items,function(m,k){switch(m){case"next":k.click(function(l){c.show("next");l.stopPropagation()});k.attr("title",c.t("Next Image"));break;case"prev":k.click(function(l){c.show("prev");l.stopPropagation()});k.attr("title",c.t("Previous Image"));break;case"next-page":k.click(function(){c.items.thumbs&&c.thumbnailer.next(true)});k.attr("title",c.t("Next Page"));break;case"prev-page":k.click(function(){c.items.thumbs&&c.thumbnailer.prev(true)});k.attr("title",c.t("Previous Page"));break;case"thumbs":c.config.thumbnailer.cssID=c.config.cssID;c.config.thumbnailer.initValues={width:k.width(),height:k.height()};c.config.thumbnailer.initValues.vertical=k.width()<=k.height();k.bind("tn_click",function(l){c.show(l.n)}).bind("tn_over",function(){c.timer.pause(true)}).bind("tn_out",function(){c.timer.pause(false)}).bind("tn_error",function(l){c.trigger("error",l)});break;case"image":c.config.image.cssID=c.config.cssID;c.config.image.initValues={width:k.width(),height:k.height()};k.bind("img_click",function(l){switch(c.config.imageClick){case"next":c.show("next");break;case"fullscreen":c.fullscreen(true);break;case"url":if(l=c.data[c.cAlbum].imgs[l.n].url.replace(/&amp;/g,"&")){window.location=l}}}).bind("img_load_start",function(){c.displayPreloader(true)}).bind("img_load_end",function(l){c.n=l.n;c.displayPreloader(false);c.items.timer&&c.items.timer.hide();c.$inImage&&c.$inImage.hide()}).bind("img_transition",function(l){c.setTextValues(false,"image");c.items.thumbs&&c.thumbnailer.thumbClick(c.n);c.$inImage&&c.imager.cached[l.n].isImage&&c.$inImage.fadeIn(300);c.items.count&&c.items.count.text(c.n+1+"/"+c.data[c.cAlbum].imgs.length);c.isPlaying&&c.timer.start();c.special.o.length>0&&c.config.autohideOver&&c.hideElements();if(c.config.autohideControls){if(c.items.prev){c.items.prev[l.n==0?"hide":"show"]()}if(c.items.next){c.items.next[l.n==c.imager.data.length-1?"hide":"show"]()}}}).bind("img_enter",function(){c.imageEnter()}).bind("img_leave",function(){c.imageLeave()}).bind("img_resize",function(l){if(c.$inImage){c.$inImage.width(l.w).height(l.h).css("left",l.left).css("top",l.top);c.center();c.imager.bindMouseEvents(c.$inImage)}}).bind("img_error",function(l){c.trigger("error",l)});break;case"preloader":c.config.spinjs&&k.find("img").remove();c.displayPreloader(false);break;case"timer":var i=k.width()>k.height()?"width":"height";c.$c.bind("timer_tick",function(n){if(c.config.timerMode=="char"){for(var l=c.config.timerStepChar;--n.tick;){l+=c.config.timerStepChar}c.items.timer.html(l)}else{c.items.timer[i](c.timerSize/n.totalTicks*n.tick)}c.trigger(n.type,n)}).bind("timer_start",function(l){c.timerSize=c.$inImage[i]();c.items.timer.fadeIn(300);c.items.play&&c.items.play.addClass(c.config.cssID+"-play-active");c.trigger(l.type,l)}).bind("timer_end timer_stop",function(l){c.items.timer.hide();l.type=="timer_end"&&c.n==c.data[c.cAlbum].imgs.length-1&&c.trigger("autoplay_finish");c.trigger(l.type,l)});k.hide();break;case"play":k.click(function(n){var l={id:"play",execute:true};c.trigger("control",l);if(c.isPlaying){if(l.execute){c.timer.stop();k.removeClass(c.config.cssID+"-play-active");k.attr("title",c.t("Start Slideshow"))}c.isPlaying=false}else{if(l.execute){c.timer.start();k.addClass(c.config.cssID+"-play-active");k.attr("title",c.t("Stop Slideshow"))}c.isPlaying=true}n.stopPropagation()});k.attr("title",c.t("Start Slideshow"));break;case"count":break;case"albums":c.albums=new g.fn.tn3.Albums(c.data,k,c.config.cssID);k.hide();k.bind("albums_binit",function(l){c.trigger(l.type,l)}).bind("albums_click",function(l){c.showAlbum(l.n);c.trigger(l.type,l)}).bind("albums_init",function(l){c.timer.pause(true);c.trigger(l.type,l)}).bind("albums_error",function(l){c.trigger("error",l)}).bind("albums_close",function(){c.timer.pause(false)});break;case"album":break;case"albums-next":c.albums&&c.albums.setControl("next",k);k.attr("title",c.t("Next Album Page"));break;case"albums-prev":c.albums&&c.albums.setControl("prev",k);k.attr("title",c.t("Previous Album Page"));break;case"albums-close":c.albums&&c.albums.setControl("close",k);k.attr("title",c.t("Close"));break;case"show-albums":k.click(function(l){c.items.albums&&c.albums.show(0,c.cAlbum,false,true);l.stopPropagation()});k.attr("title",c.t("Album List"));break;case"fullscreen":k.click(function(n){var l={id:"fullscreen",execute:true};c.trigger("control",l);l.execute&&c.fullscreen(true);n.stopPropagation()});k.attr("title",c.t("Maximize"));break;default:c.special.x[m]&&k.click(function(n){var l=!c.items[c.special.x[m]].is(":visible"),p={id:m,execute:true,active:l};c.trigger("control",p);if(p.execute){l?k.addClass(c.config.cssID+"-"+m+"-active"):k.removeClass(c.config.cssID+"-"+m+"-active");c.items[c.special.x[m]].toggle()}n.stopPropagation()})}});if(this.config.width!==null||this.config.height!==null){if(this.config.width==null){this.config.width=this.config.initValues.width}if(this.config.height==null){this.config.height=this.config.initValues.height}this.resize(this.config.width,this.config.height)}a=Math.min(this.config.iniAlbum,this.data.length-1);this.config.responsive!==false&&this.initResponsive(this.config.responsive);this.initialized=true;this.config.startWithAlbums&&this.data.length>1&&this.items.albums?this.albums.show():this.showAlbum(a,this.config.iniImage);this.config.isFullScreen&&this.onFullResize();if(this.config.autoplay){this.items.play?this.items.play.click():this.timer.start()}this.trigger("init")}},parseLayout:function(){var s=this.items={},p=this.config,i=p.active,r=p.inactive,a=p.cssID.length+1,q=this,c=/MSIE/.test(navigator.userAgent),e,b;this.$c.find("div[class^='"+p.cssID+"-']").each(function(){e=g(this);b=e.attr("class").split(" ")[0].substr(a);if(g.inArray(b,r)!=-1){e.remove()}else{if(i.length==0||g.inArray(b,i)!=-1){s[b]=e}else{b!="gallery"&&e.remove()}}if(e.parent().hasClass(p.cssID+"-image")){if(!q.$inImage){q.$inImage=g('<div class="tn3-in-image"></div>');e.parent().append(q.$inImage);if(c){var k=g("<div />");k.css("background-color","#fff").css("opacity",0).css("width","100%").css("height","100%");k.appendTo(q.$inImage)}q.$inImage.css("position","absolute").width(s.image.width()).height(s.image.height())}e.appendTo(q.$inImage)}this.className.indexOf("tn3_")!=-1&&q.addSpecial(b,this.className)});$cm=this.$c;g.each(["albums","album","album-next","album-prev","show-albums"],function(k,l){delete s[l];$cm.find("."+p.cssID+"-"+l).remove()});var u=g('<div title="Powered by TN3 Gallery"></div>');u.css("position","absolute").css("bottom","14px").css("right","53px").css("cursor","pointer").width(40).height(18);u.appendTo(this.$c.find("."+p.cssID+"-gallery"));u.click(function(){window.location="http://tn3gallery.com"}).hover(function(){g(this).css("background-position","-258px -45px")},function(){g(this).css("background-position","-258px -7px")})},addSpecial:function(e,b){for(var a=b.split(" "),c,i=0;i<a.length;i++){c=a[i].split("_");if(c[0]=="tn3"){if(c[1]=="x"){this.special.x[e]=c[2]}else{this.special[c[1]].push(e);if(c[1]=="rh"||c[1]=="rv"){this.config.initValues[e]={w:this.items[e].width(),h:this.items[e].height()}}}}}},initHover:function(c,b){var a=this;c.hover(function(){c.addClass(a.config.cssID+"-"+b+"-over")},function(){c.removeClass(a.config.cssID+"-"+b+"-over")})},setTextValues:function(i,b){var a,e,k,c=b+"-";for(k in this.items){if(k.indexOf(c)==0){a=k.substr(c.length);if(a!="info"&&a!="prev"&&a!="next"){e=b=="image"?this.data[this.cAlbum].imgs[this.n]:this.data[this.cAlbum];if(!e||e[a]==undefined){e={};e[a]=""}else{e[a]=g.trim(e[a])}a={field:a,text:e[a],data:e};this.trigger("set_text",a);if(i||a.text==undefined||a.text.length==0){this.items[k].html("");this.items[k].hide()}else{this.items[k].html(a.text);this.items[k].show()}}}}},show:function(b,a){this.timer.stop();this.showInit=true;this.imager&&this.imager.show(b);a&&this.fullscreen()},setAlbumData:function(e,b){if(b){this.trigger("error",{description:b})}else{for(var a=0,c=e.length;a<c;a++){this.data.push(e[a])}this.$c&&this.init(this.$c,this.config.fullOnly)}},setImageData:function(c,b,a){if(a){this.trigger("error",{description:a})}else{this.displayPreloader(false);c={data:c};this.trigger("image_data",c);this.data[b].imgs=c.data;if(this.cAlbum==b){this.rebuild(c.data,this.showInit?0:this.config.iniImage)}}},showAlbum:function(c,b,a){if(this.initialized){if(c>this.data.length){return}this.timer.stop();this.cAlbum=c;this.albums&&this.albums.hide();if(this.data[this.cAlbum].imgs===undefined){if(this.loader){this.loader.getImages(this.data[this.cAlbum].adata,this.cAlbum);this.displayPreloader(true)}else{this.trigger("error",{description:"Wrong album id"})}}else{this.rebuild(this.data[this.cAlbum].imgs,b)}}else{this.config.iniAlbum=c;this.config.iniImage=b;this.init(this.$c,false)}a&&this.fullscreen()},rebuild:function(b,a){if(this.items.thumbs){if(this.thumbnailer){this.thumbnailer.rebuild(b)}else{this.thumbnailer=new g.fn.tn3.Thumbnailer(this.items.thumbs,b,this.config.thumbnailer)}}if(this.items.image){if(this.imager){this.imager.rebuild(b)}else{this.imager=new g.fn.tn3.Imager(this.items.image,b,this.config.image)}}this.setTextValues(true,"image");this.setTextValues(false,"album");this.trigger("rebuild",{album:this.cAlbum});this.show(a==null?0:a)},showElements:function(c){if(this.areHidden){var b=this,a;g.each(this.special.o,function(e,i){if(b.config.autohideControls){if(i=="prev"&&b.n==0){return true}if(i=="next"&&b.n==b.imager.data.length-1){return true}}a=b.items[i];a.show();if(c&&g.support.opacity){a.stop(true);a.css("opacity",0);a.animate({opacity:1},{duration:c,queue:false})}});this.areHidden=false}},hideElements:function(c){if(!this.areHidden){var b=this,a;g.each(this.special.o,function(e,i){a=b.items[i];if(c&&g.support.opacity){a.stop(true);a.animate({opacity:0},{duration:c,complete:function(){a.hide()},queue:false})}else{a.hide()}});this.areHidden=true}},setData:function(a){if(this.items.thumbs){this.thumbnailer.data=a}if(this.items.imager){this.imager.data=a}},exitFullScreen:function(){!d.isFullScreen()&&this.config.isFullScreen&&this.fullscreen()},nativeFS:false,fullscreen:function(a){if(this.config.isFullScreen){if(this.config.useNativeFullScreen&&this.nativeFS){d.cancelFullScreen(this.$c);document.removeEventListener(d.fullScreenEventName,g.proxy(this.exitFullScreen,this))}else{g(window).unbind("resize",this.onFullResize);g.tn3unblock()}if(this.config.responsive!==false){this.initResponsive(this.config.responsive)}else{this.config.width!==null||this.config.height!==null?this.resize(this.config.width,this.config.height):this.resize(this.config.initValues.width,this.config.initValues.height)}if(this.items.fullscreen){this.items.fullscreen.removeClass(this.config.cssID+"-fullscreen-active");this.items.fullscreen.attr("title",this.t("Maximize"))}this.config.fullOnly&&this.$c.hide();this.config.isFullScreen=false;this.trigger("fullscreen",{fullscreen:false});this.config.keyNavigation=="fullscreen"&&g(document).unbind("keyup",this.listenKeys)}else{if(this.config.useNativeFullScreen&&a){document.addEventListener(d.fullScreenEventName,g.proxy(this.exitFullScreen,this),true);d.requestFullScreen(this.$tn3);this.nativeFS=true}else{g.tn3block({message:this.$tn3,cssID:this.config.cssID});g(window).bind("resize",g.proxy(this.onFullResize,this));this.nativeFS=false}this.config.fullOnly&&this.$c.show();this.config.isFullScreen=true;if(this.items.fullscreen){this.items.fullscreen.addClass(this.config.cssID+"-fullscreen-active");this.items.fullscreen.attr("title",this.t("Minimize"))}this.onFullResize();this.trigger("fullscreen",{fullscreen:true})}},listenKeys:function(b){if(b.keyCode==70){this.items.fullscreen.click()}else{if(this.items.albums&&this.albums.enabled){var a=0;switch(b.keyCode){case 27:this.albums.hide();break;case 39:a="r";break;case 37:a="l";break;case 38:a="u";break;case 40:a="d";break;case 32:a="p"}a&&this.albums.select(a)}else{switch(b.keyCode){case 27:this.config.isFullScreen&&this.fullscreen(true);break;case 39:this.show("next");break;case 37:this.show("prev");break;case 38:this.items.albums&&this.albums.show(0,this.cAlbum,false,true);break;case 32:this.items.play.click()}}}},onFullResize:function(){if(this.config.useNativeFullScreen&&this.nativeFS){this.resize(window.screen.width,window.screen.height)}else{var b=g(window),a=b.width();b=b.height();a-=this.config.initValues.wDif;b-=this.config.initValues.hDif;this.resize(a,b)}},resize:function(k,c){this.$tn3.width(k).height(c);var b=k-this.config.initValues.width,i=c-this.config.initValues.height,m,e,a=this;if(this.items.image){m=this.config.image.initValues.width+b;e=this.config.image.initValues.height+i;if(this.imager){this.imager.setSize(m,e)}else{this.items.image.width(m).height(e);this.$inImage.width(m).height(e)}}if(this.items.thumbs){m=this.config.thumbnailer.initValues.width+b;e=this.config.thumbnailer.initValues.height+i;if(this.thumbnailer){this.thumbnailer.setSize(m,e)}else{this.config.thumbnailer.initValues.vertical?this.items.thumbs.height(e):this.items.thumbs.width(m)}}if(this.items.albums){m=this.albums.initValues.width+b;e=this.albums.initValues.height+i;this.albums.changeSize(b,i)}g.each(this.special.rh,function(n,l){a.items[l].width(a.config.initValues[l].w+b)});g.each(this.special.rv,function(n,l){a.items[l].height(a.config.initValues[l].h+i)});this.center()},center:function(){var c,b=this,a=b.items.image.position();g.each(this.special.v,function(e,i){c=b.items[i];c.css("top",(c.parent().height()-c.height())/2)});g.each(this.special.h,function(e,i){c=b.items[i];c.css("left",(c.parent().width()-c.width())/2)});g.each(this.special.vi,function(e,i){c=b.items[i];c.css("top",a.top+(b.items.image.height()-c.height())/2)});g.each(this.special.hi,function(e,i){c=b.items[i];c.css("left",a.left+(b.items.image.width()-c.width())/2)});if(this.spinner){this.displayPreloader(true);this.displayPreloader(false)}},trigger:function(e,b){var a=g.Event("tn3_"+e),c;for(c in b){a[c]=b[c]}if(b&&b.type!=undefined){a.type="tn3_"+e}a.source=this;this.$c.trigger(a);this.config[e]&&this.config[e].call(this,a);for(c in b){b[c]=a[c]}},initMouseWheel:function(){var b=this,a=function(c){b.show((c.originalEvent.detail?-c.originalEvent.detail:c.originalEvent.wheelDelta)>0?"prev":"next");c.preventDefault()};this.$tn3.bind("mousewheel",a);this.$tn3.bind("DOMMouseScroll",a)},initResponsive:function(s){var p;if(typeof s=="number"){var i=g(window);p=function(){var l=i.width(),k=i.height();this.resize(l*s/100,k*s/100)}}else{if(g.isFunction(s)){p=s}else{if(s!==false){var r=this.$c.parent(),a=(this.config.width==null?this.config.initValues.width:this.config.width)/(this.config.height==null?this.config.initValues.height:this.config.height),q=r.width(),c=r.height();p=s=="enabled"?function(){q=r.width();c=r.height();this.resize(q,c)}:s=="height"?function(){c=r.height();q=c*a;this.resize(q,c)}:function(){q=r.width();c=q/a;this.resize(q,c)}}}}var e=this,b=function(){if(e.config.useNativeFullScreen){d.isFullScreen()||g.proxy(p,e)()}else{g.proxy(p,e)()}};g(window).bind("resize",b);b()},replaceMenu:function(c,b){var a='<div style="position:absolute;background-color:#fff;color: #000;padding:0px 4px 0px 4px;z-index:1010;font-family:sans-serif;font-size:12px;">&copy; <a href="'+b+'">'+c+"</a></div>";this.$tn3.bind("contextmenu",function(e){e.preventDefault()}).bind("mousedown",function(e){if(e.which==3){var i=g(a);g("body").append(i);i.css("left",e.pageX).css("top",e.pageY);i.find("a").mouseup(function(k){window.location=b;i.unbind(k)});g("body").mouseup(function(k){i.remove();g("body").unbind(k)})}})},imageEnter:function(){this.config.timerOverStop&&this.timer.pause(true);this.special.o.length>0&&this.showElements(this.config.overFadeDuration)},imageLeave:function(){this.config.timerOverStop&&this.timer.pause(false);this.special.o.length>0&&this.hideElements(this.config.overFadeDuration)},displayPreloader:function(a){if(this.items.preloader){if(a){this.items.preloader.show();if(this.config.spinjs){if(this.spinner){this.spinner.spin(this.items.preloader[0])}else{this.spinner=(new Spinner(this.config.spinjs)).spin(this.items.preloader[0])}}}else{this.spinner&&this.spinner.stop();this.items.preloader.hide()}}}};var d={supportsFullScreen:false,isFullScreen:function(){return false},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},f="webkit moz o ms khtml".split(" ");if(typeof document.cancelFullScreen!="undefined"){d.supportsFullScreen=true}else{for(var j=0,h=f.length;j<h;j++){d.prefix=f[j];if(typeof document[d.prefix+"CancelFullScreen"]!="undefined"){d.supportsFullScreen=true;break}}}if(d.supportsFullScreen){d.fullScreenEventName=d.prefix+"fullscreenchange";d.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}};d.requestFullScreen=function(a){this.prefix==="webkit"&&a.css("float","none");return this.prefix===""?a[0].requestFullScreen():a[0][this.prefix+"RequestFullScreen"]()};d.cancelFullScreen=function(a){this.prefix==="webkit"&&a.css("float","left");return this.prefix===""?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}}})(jQuery);(function(y,F,G){function E(c,d){var b=F.createElement(c||"div"),a;for(a in d){b[a]=d[a]}return b}function C(b){for(var c=1,a=arguments.length;c<a;c++){b.appendChild(arguments[c])}return b}function D(e,f,d,c){var b=["opacity",f,~~(e*100),d,c].join("-");d=0.01+d/c*100;c=Math.max(1-(1-e)/f*(100-d),e);var a=w.substring(0,w.indexOf("Animation")).toLowerCase();a=a&&"-"+a+"-"||"";return v[b]||(s.insertRule("@"+a+"keyframes "+b+"{0%{opacity:"+c+"}"+d+"%{opacity:"+e+"}"+(d+0.01)+"%{opacity:1}"+(d+f)%100+"%{opacity:"+e+"}100%{opacity:"+c+"}}",s.cssRules.length),v[b]=1),b}function z(d,e){var c=d.style,b,a;if(c[e]!==G){return e}e=e.charAt(0).toUpperCase()+e.slice(1);for(a=0;a<A.length;a++){b=A[a]+e;if(c[b]!==G){return b}}}function x(b,c){for(var a in c){b.style[z(b,a)||a]=c[a]}return b}function B(c){for(var d=1;d<arguments.length;d++){var b=arguments[d],a;for(a in b){c[a]===G&&(c[a]=b[a])}}return c}function r(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;){b.x+=a.offsetLeft;b.y+=a.offsetTop}return b}var A=["webkit","Moz","ms","O"],v={},w,s=function(){var a=E("style",{type:"text/css"});return C(F.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),I={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2000000000,className:"spinner",top:"auto",left:"auto"},H=function p(a){if(!this.spin){return new p(a)}this.opts=B(a||{},p.defaults,I)};H.defaults={};B(H.prototype,{spin:function(d){this.stop();var e=this,b=e.opts,m=e.el=x(E(0,{className:b.className}),{position:"relative",width:0,zIndex:b.zIndex}),k=b.radius+b.length+b.width,j,h;d&&(d.insertBefore(m,d.firstChild||null),h=r(d),j=r(m),x(m,{left:(b.left=="auto"?h.x-j.x+(d.offsetWidth>>1):parseInt(b.left,10)+k)+"px",top:(b.top=="auto"?h.y-j.y+(d.offsetHeight>>1):parseInt(b.top,10)+k)+"px"}));m.setAttribute("aria-role","progressbar");e.lines(m,e.opts);if(!w){var g=0,i=b.fps,f=i/b.speed,c=(1-b.opacity)/(f*b.trail/100),a=f/b.lines;(function l(){g++;for(var n=b.lines;n;n--){e.opacity(m,b.lines-n,Math.max(1-(g+n*a)%f*c,b.opacity),b)}e.timeout=e.el&&setTimeout(l,~~(1000/i))})()}return e},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=G),this},lines:function(d,e){function c(f,g){return x(E(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:f,boxShadow:g,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*b+e.rotate)+"deg) translate("+e.radius+"px,0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(var b=0,a;b<e.lines;b++){a=x(E(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:w&&D(e.opacity,e.trail,b,e.lines)+" "+1/e.speed+"s linear infinite"});e.shadow&&C(a,x(c("#000","0 0 4px #000"),{top:"2px"}));C(d,C(a,c(e.color,"0 0 1px rgba(0,0,0,.1)")))}return d},opacity:function(b,c,a){c<b.childNodes.length&&(b.childNodes[c].style.opacity=a)}});(function(){function a(d,c){return E("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}var b=x(E("group"),{behavior:"url(#default#VML)"});!z(b,"transform")&&b.adj?(s.addRule(".spin-vml","behavior:url(#default#VML)"),H.prototype.lines=function(h,g){function f(){return x(a("group",{coordsize:i+" "+i,coordorigin:-j+" "+-j}),{width:i,height:i})}function e(m,l,k){C(c,C(x(f(),{rotation:360/g.lines*m+"deg",left:~~l}),C(x(a("roundrect",{arcsize:g.corners}),{width:j,height:g.width,left:g.radius,top:-g.width>>1,filter:k}),a("fill",{color:g.color,opacity:g.opacity}),a("stroke",{opacity:0}))))}var j=g.length+g.width,i=2*j,d=-(g.width+g.length)*2+"px",c=x(f(),{position:"absolute",top:d,left:d});if(g.shadow){for(d=1;d<=g.lines;d++){e(d,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(d=1;d<=g.lines;d++){e(d)}return C(h,c)},H.prototype.opacity=function(f,e,d,c){f=f.firstChild;c=c.shadow&&c.lines||0;f&&e+c<f.childNodes.length&&(f=f&&f.firstChild,f&&(f.opacity=d))}):w=z(b,"animation")})();typeof define=="function"&&define.amd?define(function(){return H}):y.Spinner=H})(window,document);(function(a){a.fn.tn3.Imager=function(d,e,f){this.$c=d;this.data=e;f.crop=false;this.config=a.extend(true,{},a.fn.tn3.Imager.config,f);this.init()};a.fn.tn3.Imager.config={transitions:null,defaultTransition:{type:"slide"},random:false,cssID:"tn3",maxZoom:1.4,crop:false,clickEvent:"click",idleDelay:3000,stretch:true,dif:0};a.fn.tn3.Imager.prototype={config:null,$c:false,$ins:null,data:false,cached:null,active:-1,$active:false,$buffer:false,isInTransition:false,ts:null,cDim:null,qid:null,currentlyLoading:null,side:null,$ic:null,$binder:null,infoID:null,lastEnter:false,mouseCoor:{x:0,y:0},mouseIsOver:false,init:function(){this.$c.css("overflow","hidden");this.$c.css("position","relative");this.$ins=a('<div class="'+this.config.cssID+'-image-ins" style="position:absolute;width:100%;height:100%;"></div>');this.$c.prepend(this.$ins);this.bindMouseEvents(this.$c);this.cached=[];this.ts=new a.fn.tn3.Transitions(this.config.transitions,this.config.defaultTransition,this.config.random,this,"onTransitionEnd")},bindMouseEvents:function(c){this.unbindMouseEvents();var d=this;c.hover(function(){d.mouseIsOver=true;d.enterLeave("enter");d.startIdle();a(document).mousemove(a.proxy(d.onMouseMove,d))},function(){d.mouseIsOver=false;d.enterLeave("leave");d.stopIdle();a(document).unbind("mousemove",d.onMouseMove)});c[this.config.clickEvent](function(b){d.active==-1||d.isInTransition||b.target.tagName.toUpperCase()!="A"&&d.trigger("click",{n:d.active})});this.$binder=c},unbindMouseEvents:function(){this.$binder&&this.$binder.unbind("mouseenter mouseleave "+this.config.clickEvent);a(document).unbind("mousemove",this.onMouseMove);this.stopIdle()},startIdle:function(){this.stopIdle();var c=this;if(this.config.idleDelay>0){this.infoID=setTimeout(function(){c.enterLeave("leave");c.stopIdle()},this.config.idleDelay)}},onMouseMove:function(c){this.mouseCoor={x:c.pageX,y:c.pageY};if(!this.isInTransition){this.infoID||this.enterLeave("enter");this.startIdle()}},stopIdle:function(){clearTimeout(this.infoID);this.infoID=null},enterLeave:function(c){this.lastEnter!=c&&this.trigger(c);this.lastEnter=c},show:function(c){if(this.isInTransition){this.qid=c}else{this.qid=null;if(c=="next"){c=this.active+1<this.data.length?this.active+1:0;this.side="left"}else{if(c=="prev"){c=this.active>0?this.active-1:this.data.length-1;this.side="right"}else{this.side=this.active>c?"right":"left"}}if(this.data[c]){this.trigger("load_start",{n:c});this.$buffer=a('<div class="'+this.config.cssID+'-image-in" style="position:absolute;overflow:hidden;"></div>');this.$buffer.css("visibility","hidden");this.$ins.prepend(this.$buffer);if(this.cached[this.currentlyLoading]!=undefined){this.cached[this.currentlyLoading].init=false}if(this.cached[c]!=undefined){if(this.cached[c].status=="loaded"){this.initImage(c)}else{this.cached[c].init=true;this.currentlyLoading=c}}else{this.startLoading(c,true)}}}},startLoading:function(d,e){var f=typeof d=="number"?d:d=="next"?this.active+1:this.active-1;if(!(this.cached[f]!=undefined&&this.cached[f].status=="loaded"||this.data[f]==undefined)){this.cached[f]={isImage:true,status:"loading",init:e};this.currentlyLoading=f;if(this.data[f].content!=undefined){this.cached[f].isImage=false;this.onCacheLoad(a(a.trim(this.data[f].content)),f)}else{this.cached[f].loader=new a.fn.tn3.ImageLoader(this.data[f].img,this,this.onCacheLoad,[f])}}},onCacheLoad:function(d,e,f){this.cached[e].status="loaded";this.cached[e].isImage&&d.attr("alt",this.data[e].alt);this.cached[e].$content=d;f&&this.trigger("error",{description:f,n:e});this.cached[e].init&&this.initImage(e)},initImage:function(d){var e=this.cached[d].$content;this.currentlyLoading=null;this.active=d;if(!this.cDim){this.cDim={w:this.$c.width(),h:this.$c.height()}}this.$buffer.width(this.cDim.w).height(this.cDim.h);var f=a('<div class="'+this.config.cssID+'-full-image" style="position:absolute"></div>');e.appendTo(f);this.$buffer.append(f);this.$buffer.data("ic",f);this.$buffer.data("img",e);this.resize(this.$buffer);f=[true];this.trigger("load_end",{n:d,content:e,isImage:this.cached[d].isImage,doTransition:f});f[0]&&this.initTransition()},initTransition:function(){this.$buffer.css("visibility","visible");if(this.$active!=false){this.isInTransition=true;this.unbindMouseEvents();if(this.mouseIsOver){a(document).mousemove(a.proxy(this.onMouseMove,this))}else{this.mouseCoor={x:0,y:0}}this.lastEnter="leave";this.$active.find("video").length>0&&this.config.transitions>0&&this.config.transitions[0].type==="translate"?this.ts.start(this.$active,this.$buffer,this.side,true):this.ts.start(this.$active,this.$buffer,this.side)}else{this.$active=this.$buffer;this.trigger("transition",{n:this.active})}this.startLoading(this.side=="right"?"prev":"next",false)},setSize:function(c,d){this.isInTransition&&this.ts.stop(this.$active,this.$buffer,this.ts.config);this.$c.width(c).height(d);this.cDim={w:this.$c.width(),h:this.$c.height()};if(this.$active){this.$active.width(c).height(d);this.resize(this.$active)}},resize:function(c){if(c.data("img")==undefined){this.trigger("resize",{w:this.cDim.w,h:this.cDim.h,left:0,top:0})}else{this.cached[this.active].isImage?this.resizeImage(c):this.resizeContent(c)}},resizeImage:function(f){$img=f.data("img");$ic=f.data("ic");$img.width("auto").height("auto");f.data("scaled",false);var g=$img.width(),l=$img.height(),j=0,k=0,i={w:g,h:l,left:0,top:0};$img.attr("width",g).attr("height",l);if($img.get(0).tagName.toUpperCase()=="IMG"&&(g!=this.cDim.w||l!=this.cDim.h)){j=this.cDim.w/g;k=this.cDim.h/l;j=this.config.crop?Math.max(j,k):Math.min(j,k);j=Math.min(this.config.maxZoom,j);g=i.w=Math.round(g*j)-this.config.dif;l=i.h=Math.round(l*j)-this.config.dif;if(this.cDim.w>=g){j=i.left=(this.cDim.w-g)/2}else{j=-(g-this.cDim.w)*0.5;i.w=this.cDim.w}if(this.cDim.h>l){k=i.top=(this.cDim.h-l)/2}else{k=-(l-this.cDim.h)*0.5;i.h=this.cDim.h}$img.width(g).height(l);$img.attr("width",g).attr("height",l);$ic.width(g).height(l);f.data("scaled",true)}$ic.css("left",j).css("top",k);this.bindMouseEvents($ic);this.trigger("resize",i)},resizeContent:function(d){$ic=d.data("ic");$img=d.data("img");d.data("scaled",false);var f=$img.width(),h=$img.height(),g={w:f,h:h,left:0,top:0};if(this.config.stretch){$ic.width(this.cDim.w).height(this.cDim.h);$img.width(this.cDim.w).height(this.cDim.h);d.data("scaled",true)}else{g.left=(this.cDim.w-f)*0.5;g.top=(this.cDim.h-h)*0.5;$ic.css("left",g.left).css("top",g.top)}this.bindMouseEvents($ic);this.trigger("resize",g)},onTransitionEnd:function(){this.$active.remove();this.$active=this.$buffer;this.$active.css("width","+=1");this.isInTransition=false;this.trigger("transition",{n:this.active});this.bindMouseEvents(this.$binder);var c=this.$binder.offset();this.mouseIsOver=false;if(this.mouseCoor.x>=c.left&&this.mouseCoor.x<=c.left+this.$binder.width()){if(this.mouseCoor.y>=c.top&&this.mouseCoor.y<=c.top+this.$binder.height()){this.lastEnter="leave";this.enterLeave("enter");this.startIdle();this.mouseIsOver=true;a(document).mousemove(a.proxy(this.onMouseMove,this))}}this.qid!=null&&this.show(this.qid)},trigger:function(d,f){var h=a.Event("img_"+d),g;for(g in f){h[g]=f[g]}h.source=this;this.$c.trigger(h);this.config[d]&&this.config[d].call(this,h)},destroy:function(){this.isInTransition&&this.ts.stop(this.$active,this.$buffer);this.$active&&this.$active.remove();this.$buffer.remove()},rebuild:function(c){this.quid=null;this.isInTransition&&this.ts.stop(this.$active,this.$buffer);this.$buffer&&this.$buffer.remove();this.cached=[];this.data=c;this.loader&&this.loader.cancel()}}})(jQuery);(function(a){a.fn.tn3.Thumbnailer=function(d,e,f){this.$c=d;this.data=e;this.config=a.extend({},a.fn.tn3.Thumbnailer.config,f);a(window).resize(a.proxy(this.onWinResize,this));this.init()};a.fn.tn3.Thumbnailer.config={overMove:true,buffer:20,speed:8,slowdown:50,shaderColor:"#000000",shaderOpacity:0.5,shaderDuration:300,shaderOut:300,useTitle:false,seqLoad:true,align:1,mode:"thumbs",cssID:"tn3"};a.fn.tn3.Thumbnailer.prototype={config:null,$c:null,$oc:null,$ul:null,data:null,active:-1,listSize:0,containerSize:0,containerPadding:0,noBufSize:0,containerOffset:0,mcoor:"mouseX",edge:"left",size:"width",outerSize:"outerWidth",mouseX:0,mouseY:0,intID:false,pos:0,difference:0,cnt:1,thumbCount:-1,initialized:false,clickWhenReady:-1,loaders:null,lis:null,isVertical:null,marginDif:0,nloaded:0,firstToLoad:0,isTouch:false,init:function(){this.$c.css("position","absolute").css("cursor","progress");this.lis=[];this.loaders=[];this.initialized=false;this.$oc=a("<div />");this.$ul=a("<ul />");this.$oc.appendTo(this.$c);this.$oc.css("position","absolute").css("overflow","hidden").width(this.$c.width()).height(this.$c.height());this.$ul.appendTo(this.$oc);this.$ul.css("position","relative").css("margin","0px").css("padding","0px").css("border-width","0px").css("width","12000px").css("list-style","none");if(this.isVertical==null){this.isVertical=this.$c.width()<this.$c.height();if(this.isVertical=false){this.mcoor="mouseY";this.edge="top";this.size="height";this.outerSize="outerHeight"}else{this.mcoor="mouseX";this.edge="left";this.size="width";this.outerSize="outerWidth"}this.containerSize=this.$oc[this.size]();this.noBufSize=this.containerSize-2*this.config.buffer;this.containerOffset=this.$oc.offset()[this.edge];this.containerPadding=parseInt(this.$c.css("padding-"+this.edge))}this.listSize=0;if(navigator.userAgent.indexOf("MSIE")!=-1){this.config.seqLoad=false}this.data.length>0&&this.loadNextThumb()},loadNextThumb:function(){this.thumbCount++;var c=a("<li></li>");this.$ul.append(c);if(this.config.mode=="thumbs"){var d=this.data[this.thumbCount].thumb;if(d){this.loaders.push(new a.fn.tn3.ImageLoader(d,this,this.onLoadThumb,[c,this.thumbCount]));!this.config.seqLoad&&this.thumbCount<this.data.length-1&&this.loadNextThumb();return}else{this.config.mode="bullets"}}this.config.mode=="numbers"&&c.text(this.thumbCount+1);this.onLoadThumb(null,c,this.thumbCount)},onLoadThumb:function(f,g,j,h){this.lis[j]={li:g};g.addClass(this.config.cssID+"-thumb");g.css("float",this.isVertical?"none":"left");if(f){var i=this.lis[j].thumb=a(f);g.append(i);this.lis[j].pos=g.position()[this.edge]}this.config.useTitle&&this.data[j].title&&g.attr("title",this.data[j].title.replace(/\&amp;/g,"&"));if(this.config.mode=="thumbs"&&this.config.shaderOpacity>0){this.lis[j].shade=a("<div/>");g.prepend(this.lis[j].shade);this.lis[j].shade.css("background-color",this.config.shaderColor).css("width",i.width()).css("height",i.height()).css("position","absolute")}this.initThumb(j);g.css("opacity",0);g.animate({opacity:1},1000);this.listSize+=g[this.outerSize](true);if(!this.initialized){this.firstToLoad=j;this.initialized=true;this.initMouse(true)}h&&this.trigger("error",{description:h,n:j});this.trigger("thumbLoad",{n:j});this.nloaded++;if(this.nloaded<this.data.length){if(this.config.seqLoad||this.config.mode!="thumbs"){this.loadNextThumb()}}else{if(f){this.loaders=null}if(!this.config.seqLoad){for(f=0;f<this.lis.length;f++){this.lis[f].pos=this.lis[f].li.position()[this.edge]}}this.thumbsLoaded()}if(this.clickWhenReady==j){this.clickWhenReady=-1;this.thumbClick(j)}},initThumb:function(d){var e=this.lis[d];if(e.li){e.li.removeClass().addClass(this.config.cssID+"-thumb");if(e.shade){e.shade.stop();e.shade.css("opacity",this.config.shaderOpacity)}var f=this;e.li.click(function(){f.thumbClick(d);f.trigger("click",{n:d});return false});this.config.mode!="thumbs"&&e.li.hover(function(){f.mouseOver(d)},function(){f.mouseOver(-1)})}},lastOver:-1,mouseOver:function(c){if(c!=this.lastOver){if(this.lastOver!=-1&&this.lastOver!=this.active){d=this.lis[this.lastOver];d.li.removeClass(this.config.cssID+"-thumb-over");if(d.shade){d.shade.stop();d.shade.animate({opacity:this.config.shaderOpacity},{duration:this.config.shaderOut,easing:"easeOutCubic",queue:false})}this.trigger("thumbOut",{n:c})}this.lastOver=c;if(!(c==-1||c==this.active)){var d=this.lis[c];d.li.addClass(this.config.cssID+"-thumb-over");if(d.shade){d.shade.stop();d.shade.animate({opacity:0},{duration:this.config.shaderDuration,easing:"easeOutCubic",queue:false})}this.trigger("thumbOver",{n:c})}}},next:function(c){if(c){this.listSize>this.containerSize&&this.move(this.$ul.position()[this.edge]-this.containerSize)}else{c=this.active+1;if(this.active==-1||this.active+1==this.data.length){c=0}this.thumbClick(c)}},prev:function(c){if(c){this.listSize>this.containerSize&&this.move(this.$ul.position()[this.edge]+this.containerSize)}else{c=this.active-1;if(this.active==-1||this.active==0){c=this.data.length-1}this.thumbClick(c)}},move:function(c){var d={};d[this.edge]=Math.min(0,Math.max(c,-(this.listSize-this.containerSize)));this.$ul.stop();this.$ul.animate(d,300)},thumbClick:function(c){if(this.active==-1){if(this.thumbCount<c||c>this.lis.length-1||this.lis[c]==null){this.clickWhenReady=c;return}}else{if(c==this.active){return}else{this.initThumb(this.active)}}if(c=="next"){c=this.active+1<this.data.length?this.active+1:0}else{if(c=="prev"){c=this.active>0?this.active-1:this.data.length-1}}if(this.lis[c]){var d=this.lis[c];d.li.addClass(this.config.cssID+"-thumb-selected").unbind("click mouseenter mouseleave");d.shade&&d.shade.animate({opacity:0},this.config.shaderDuration);this.active=c;this.centerActive()}},centerActive:function(d){if(this.active!=-1){var f=this.lis[this.active].li,h=this.$ul.position()[this.edge]+f.position()[this.edge],g=f[this.outerSize]()/2;if(h+g>this.containerSize||h+g<0){f=10-f.position()[this.edge]+this.containerSize/2-g;f=Math.min(0,f);f=Math.max(f,-this.listSize+this.containerSize);h={};h[this.edge]=f;if(this.isTouch){this.$oc["scroll"+this.edge.substring(0,1).toUpperCase()+this.edge.substring(1)](-f)}else{d?this.$ul.css(h):this.$ul.animate(h,200)}}}},thumbsLoaded:function(){this.$c.css("cursor","auto");this.$ul.css("width",this.listSize+"px");this.centerList();this.trigger("load")},centerList:function(c){if(this.listSize<this.containerSize){var d={};d[this.edge]=this.config.align?this.config.align==1?(this.containerSize-this.listSize)/2:this.containerSize-this.listSize:0;c||this.config.mode!="thumbs"?this.$ul.css(d):this.$ul.animate(d,300)}else{this.centerActive(c);if(this.$ul.position()[this.edge]>0){this.$ul.css(this.edge,0)}else{this.$ul.position()[this.edge]+this.listSize<this.containerSize&&this.$ul.css(this.edge,-(this.listSize-this.containerSize))}}},initMouse:function(c){if(this.config.mode=="thumbs"){c=c?"bind":"unbind";this.$oc[c]("mouseenter",a.proxy(this.mouseenter,this));this.$oc[c]("mouseleave",a.proxy(this.mouseleave,this))}},mouseenter:function(){this.trigger("over");clearInterval(this.intID);var c=this;this.$ul.stop();this.$c.mousemove(this.mcoor=="mouseX"?function(b){c.mouseX=b.pageX-c.containerOffset}:function(b){c.mouseY=b.pageY-c.containerOffset});this.marginDif=parseInt(this.lis[this.firstToLoad].li.css("margin-"+this.edge));if(isNaN(this.marginDif)){this.marginDif=0}c.intID=this.listSize>this.containerSize&&this.config.overMove?setInterval(function(){c.slide.call(c)},10):setInterval(function(){c.mouseTrack.call(c)},10)},mouseleave:function(){this.trigger("out");this.$c.unbind("mousemove");clearInterval(this.intID);var c=this;this.intID=setInterval(function(){c.slideOut.call(c)},10);this.mouseOver(-1)},slide:function(){this.cnt=1;var d=this[this.mcoor];if(d<=this.config.buffer){this.pos=0}else{if(d>=this.containerSize-this.config.buffer){this.pos=this.containerSize-this.listSize-1}else{var e=this.containerSize*(d-this.config.buffer);e/=this.noBufSize;this.pos=e*(1-this.listSize/this.containerSize)}}for(e=this.lis.length-1;e>-1;e--){var f=d-this.prevdx;if(f>=this.lis[e].pos&&f<this.lis[e].pos+this.lis[e].li[this.size]()){this.mouseOver(e);break}}d=this.prevdx-this.marginDif;this.difference=d-this.pos;d=Math.round(d-this.difference/this.config.speed);if(this.prevdx!=d){this.$ul.css(this.edge,d);this.prevdx=d}},prevdx:0,mouseTrack:function(){for(var d=this[this.mcoor],e=this.lis.length-1;e>-1;e--){var f=d-this.$ul.position()[this.edge];if(f>=this.lis[e].pos&&f<this.lis[e].pos+this.lis[e].li[this.size]()){this.mouseOver(e);break}}},clickOn:function(c){c=c[this.edge]-this.$ul.position()[this.edge]-this.$c.offset()[this.edge];for(var d=0;d<this.lis.length;d++){lpos=this.lis[d].li.position()[this.edge];if(c>=lpos&&c<lpos+this.lis[d].li[this.size]()){this.lis[d].li.click();break}}},slideOut:function(){if(this.config.slowdown!=0&&this.difference!=0){var c=this.$ul.position()[this.edge];this.difference=c-this.pos;this.$ul.css(this.edge,c-this.difference/(this.config.speed*this.cnt));this.cnt*=1+4/this.config.slowdown;if(this.cnt>=40){this.difference=0;this.cnt=1}}else{clearInterval(this.intID);this.intID=null}},trigger:function(d,f){var h=a.Event("tn_"+d),g;for(g in f){h[g]=f[g]}h.source=this;this.$c.trigger(h);this.config[d]&&this.config[d].call(this,h)},destroy:function(){clearInterval(this.intID);this.$c.empty()},rebuild:function(c){clearInterval(this.intID);this.$c.empty();this.data=c;this.active=this.thumbCount=-1;this.nloaded=0;this.initMouse(false);this.loaders!==null&&a.each(this.loaders,function(b,d){d.cancel()});this.init()},setSize:function(c,d){if(this.config.mode=="thumbs"){this.isVertical?this.$c.height(d):this.$c.width(c);this.$oc.width(this.$c.width()).height(this.$c.height());this.containerSize=this.$oc[this.size]();this.noBufSize=this.containerSize-2*this.config.buffer;this.containerOffset=this.$oc.offset()[this.edge];this.initMouse(true);this.loaders===null&&this.centerList(true)}},onWinResize:function(){this.containerOffset=this.$oc.offset()[this.edge]}}})(jQuery);(function(a){a.fn.tn3.altLink=null;a.fn.tn3.ImageLoader=function(d,f,h,g){this.$img=a(new Image);g.unshift(this.$img);this.altLink=a.fn.tn3.altLink;f={url:d,context:f,callback:h,args:g};this.$img.bind("load",f,this.load);this.$img.bind("error",f,a.proxy(this.error,this));this.$img.attr("src",d)};a.fn.tn3.ImageLoader.prototype={$img:null,altLink:null,load:function(c){c.data.callback.apply(c.data.context,c.data.args);c.data.args[0].unbind("load").unbind("error")},error:function(c){if(this.altLink){this.altLink=null;this.$img.attr("src",a.fn.tn3.altLink+c.data.url)}else{c.data.args.push("image loading error: "+c.data.url);c.data.callback.apply(c.data.context,c.data.args);this.$img.unbind("load").unbind("error")}},cancel:function(){this.$img.unbind("load").unbind("error")}}})(jQuery);(function(a){a.fn.tn3.Timer=function(d,e,f){this.$target=d;this.duration=e;this.tickint=f};a.fn.tn3.Timer.prototype={$target:null,duration:null,id:null,runs:false,counter:null,countDuration:null,tickid:null,ticks:null,tickint:500,start:function(){if(!this.runs){this.runs=true;this.startCount(this.duration);this.trigger("timer_start")}},startCount:function(d){this.clean();this.countDuration=d;this.counter=+new Date;var e=this;this.id=setTimeout(function(){e.clean.call(e);e.runs=false;e.trigger.call(e,"timer_end")},d);var f=this.duration/this.tickint;this.ticks=Math.round(d/f);this.tickid=setInterval(function(){e.ticks=Math.ceil((d-new Date+e.counter)/f);e.ticks>0&&e.trigger.call(e,"timer_tick",{tick:e.ticks,totalTicks:e.tickint})},f);this.trigger("timer_start");this.trigger("timer_tick",{tick:this.ticks,totalTicks:this.tickint})},stop:function(){this.clean();this.runs=false;this.trigger("timer_stop")},clean:function(){clearTimeout(this.id);this.id=null;clearInterval(this.tickid);this.elapsed=this.tickid=null},elapsed:null,pause:function(c){if(this.runs){if(c){this.clean();var d=this.duration/this.tickint;this.elapsed=Math.floor((+new Date-this.counter)/d)*d}else{if(this.elapsed==null){return}this.startCount(this.countDuration-this.elapsed);this.elapsed=null}this.trigger("timer_pause",{pause:c})}},trigger:function(d,f){var h=a.Event(d),g;for(g in f){h[g]=f[g]}this.$target.trigger(h)}}})(jQuery);(function(e){var c=e.fn.tn3.Transitions=function(l,i,k,b,a){this.ts=l;this.def=e.extend(true,{},this[i.type+"Config"],i);if(!l){this.ts=[this.def]}for(var g in this.ts){this.ts[g]=e.extend(true,{},this[this.ts[g].type+"Config"],this.ts[g])}this.random=k;this.end=e.proxy(b,a)},d=c.prototype={ts:null,def:{type:"slide"},random:false,gs:[],end:null,ct:null,counter:-1,setTransition:function(){if(this.ts.length==1){this.ct=this.ts[0]}else{this.counter++;if(this.counter==this.ts.length){this.counter=0}this.random&&this.counter==0&&e.fn.tn3utils.shuffle(this.ts);this.ct=this.ts[this.counter]}},start:function(g,b,f,a){if(a){this.ct=this.def}else{this.setTransition()}if(this[this.ct.type+"Condition"]!==undefined&&!this[this.ct.type+"Condition"](g,b,this.ct)){this.ct=this.def}this[this.ct.type](g,b,this.ct,f)},stop:function(b,a){this[this.ct.type+"Stop"](b,a,this.ct)},makeGrid:function(C,A,B){var x=C.width(),w=Math.round(x/A);x=x-w*A;var z=C.height(),i=Math.round(z/B);z=z-i*B;var y,s,v,r,E,D=0,a=0,b="url("+C.find("img").attr("src")+") no-repeat scroll -";for(y=0;y<A;y++){this.gs[y]=[];r=x>y?w+1:w;for(s=0;s<B;s++){v=C.append("<div></div>").find(":last");E=z>s?i+1:i;v.width(r).height(E).css("background",b+D+"px -"+a+"px").css("left",D).css("top",a).css("position","absolute");this.gs[y].push(v);a+=E}D+=r;a=0}C.find("img").remove()},stopGrid:function(){for(var b=0;b<this.gs.length;b++){for(var a=0;a<this.gs[b].length;a++){this.gs[b][a].clearQueue();this.gs[b][a].remove()}}this.gs=[]},flatSort:function(g){for(var b=[],f=0;f<this.gs.length;f++){for(var a=0;a<this.gs[f].length;a++){b.push(this.gs[f][a])}}g&&b.reverse();return b},randomSort:function(){var a=this.flatSort();e.fn.tn3utils.shuffle(a);return a},diagonalSort:function(i,f){for(var g=[],b=i>0?this.gs.length-1:0,a=f>0?0:this.gs[0].length-1;this.gs[b];){g.push(this.addDiagonal([],b,a,i,f));b-=i}b+=i;for(a+=f;this.gs[b][a];){g.push(this.addDiagonal([],b,a,i,f));a+=f}return g},addDiagonal:function(i,f,g,b,a){i.push(this.gs[f][g]);return this.gs[f+b]&&this.gs[f+b][g+a]?this.addDiagonal(i,f+b,g+a,b,a):i},circleSort:function(q){var l=[],m=this.gs.length,b=this.gs[0].length,a=[Math.floor(m/2),Math.floor(b/2)];m=m*b;b=[[1,0],[0,1],[-1,0],[0,-1]];var k=0,p=0,i;for(l.push(this.gs[a[0]][a[1]]);l.length<m;){for(i=0;i<=k;i++){this.addGridPiece(l,a,b[p])}if(p==b.length-1){p=0}else{p++}k+=0.5}q&&l.reverse();return l},addGridPiece:function(f,a,b){a[0]+=b[0];a[1]+=b[1];this.gs[a[0]]&&this.gs[a[0]][a[1]]&&f.push(this.gs[a[0]][a[1]])},getSlidePositions:function(f,a){var b={dir:a};switch(a){case"left":b.pos=f.outerWidth(true);break;case"right":b.pos=-f.outerWidth(true);b.dir="left";break;case"top":b.pos=-f.outerHeight(true);break;case"bottom":b.pos=f.outerHeight(true);b.dir="top"}return b},animateGrid:function(u,s,t,p,m,r,a){var q={duration:p,easing:t,complete:function(){e(this).remove()}};for(t=0;t<u.length;t++){p=e.easing[m](0,t,0,r,u.length);if(t==u.length-1){var b=this;q.complete=function(){e(this).remove();a.call(b)}}if(e.isArray(u[t])){for(var i in u[t]){u[t][i].delay(p).animate(s[t],q)}}else{u[t].delay(p).animate(s[t],q)}}},getValueArray:function(m,i,k){var b=[],a=e.isArray(i),g=e.isArray(k),l;for(l=0;l<m;l++){o={};o[a?i[l%i.length]:i]=g?k[l%k.length]:k;b.push(o)}return b}};c.defined=[];c.define=function(b){for(var a in b){switch(a){case"type":c.defined.push(b.type);break;case"config":d[b.type+"Config"]=b.config;break;case"f":d[b.type]=b.f;break;case"stop":d[b.type+"Stop"]=b.stop;break;case"condition":d[b.type+"Condition"]=b.condition;break;default:d[a]=b[a]}}};c.define({type:"none",config:{},f:function(){this.end()},stop:function(){this.end()}});c.define({type:"fade",config:{duration:300,easing:"easeInQuad"},f:function(g,b,f){var a=this;g.animate({opacity:0},f.duration,f.easing,function(){a.end()})},stop:function(a){a.stop();this.end()}});c.define({type:"slide",config:{duration:300,direction:"auto",easing:"easeInOutCirc"},f:function(l,i,k,b){b=this.getSlidePositions(i,k.direction=="auto"?b:k.direction);var a={},g={};i.css(b.dir,b.pos);a[b.dir]=0;i.animate(a,k.duration,k.easing,this.end);g[b.dir]=-b.pos;l.animate(g,k.duration,k.easing)},stop:function(b,a){a.stop();b.stop();b.css("left",0).css("top",0);a.css("left",0).css("top",0);this.end()}});c.define({type:"blinds",config:{duration:240,easing:"easeInQuad",direction:"vertical",parts:12,partDuration:100,partEasing:"easeInQuad",method:"fade",partDirection:"auto",cross:true},f:function(i,f,g,b){g.direction=="horizontal"?this.makeGrid(i,1,g.parts):this.makeGrid(i,g.parts,1);b=g.partDirection=="auto"?b:g.partDirection;i=this.flatSort(b=="left"||b=="top");var a;switch(g.method){case"fade":a=this.getValueArray(i.length,"opacity",0);break;case"scale":a=this.getValueArray(i.length,b=="left"?"width":"height","1px");break;case"slide":f=this.getSlidePositions(f,b);a=this.getValueArray(i.length,f.dir,g.cross?[f.pos,-f.pos]:f.pos)}this.animateGrid(i,a,g.partEasing,g.partDuration,g.easing,g.duration,this.blindsStop)},stop:function(){this.stopGrid();this.end()},condition:function(b,a){return !b.data("scaled")||!a.data("scaled")}});c.define({type:"grid",config:{duration:260,easing:"easeInQuad",gridX:7,gridY:5,sort:"diagonal",sortReverse:false,diagonalStart:"bl",method:"fade",partDuration:300,partEasing:"easeOutSine",partDirection:"left"},f:function(l,i,k,b){this.makeGrid(l,k.gridX,k.gridY);l=k.partDirection=="auto"?b:k.partDirection;var a,g;if(k.sort=="diagonal"){switch(k.diagonalStart){case"tr":a=this.diagonalSort(1,1);break;case"tl":a=this.diagonalSort(-1,1);break;case"br":a=this.diagonalSort(1,-1);break;case"bl":a=this.diagonalSort(-1,-1)}}else{a=this[k.sort+"Sort"](k.sortReverse)}switch(k.method){case"fade":g=this.getValueArray(a.length,"opacity",0);break;case"scale":g=this.getValueArray(a.length,l=="left"?"width":"height","1px")}this.animateGrid(a,g,k.partEasing,k.partDuration,k.easing,k.duration,this.gridStop)},stop:function(){this.stopGrid();this.end()},condition:function(b,a){return !b.data("scaled")||!a.data("scaled")}})})(jQuery);(function(l){function t(f){var b=f&&f.message!==undefined?f.message:undefined;f=l.extend({},l.tn3block.defaults,f||{});b=b===undefined?f.message:b;g&&u({});var c=f.baseZ,a=m||f.forceIframe?l('<iframe class="blockUI" style="z-index:'+c+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+f.iframeSrc+'"></iframe>'):l('<div class="blockUI" style="display:none"></div>'),e=l('<div class="blockUI '+f.cssID+'-overlay" style="z-index:'+c+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');c=l('<div class="blockUI '+f.blockMsgClass+' blockPage" style="z-index:'+c+';display:none;position:fixed"></div>');c.css("left","0px").css("top","0px");e.css(f.overlayCSS);e.css("position","fixed");if(m||f.forceIframe){a.css("opacity",0)}var d=[a,e,c],h=l("body");l.each(d,function(){this.appendTo(h)});d=p&&(!l.boxModel||l("object,embed",null).length>0);if(k||d){f.allowBodyStretch&&l.boxModel&&l("html,body").css("height","100%");l.each([a,e,c],function(n,j){var i=j[0].style;i.position="absolute";if(n<2){i.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight)- (jQuery.boxModel?0:"+f.quirksmodeOffsetHack+') + "px"');i.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"')}else{if(f.centerY){i.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2- (this.offsetHeight / 2)+ (blah = document.documentElement.scrollTop? document.documentElement.scrollTop: document.body.scrollTop)+ "px"');i.marginTop=0}else{f.centerY||i.setExpression("top",'(document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}}})}if(b){b.data("blockUI.parent",b.parent());c.append(b);if(b.jquery||b.nodeType){l(b).show()}}if((m||f.forceIframe)&&f.showOverlay){a.show()}f.showOverlay&&e.show();b&&c.show();f.onBlock&&f.onBlock();q(1,f);g=b}function u(b){b=l.extend({},l.tn3block.defaults,b||{});q(0,b);var a=l("body").children().filter(".blockUI").add("body > .blockUI");s(a,b)}function s(b,a){b.each(function(){this.parentNode&&this.parentNode.removeChild(this)});g.data("blockUI.parent").append(g);g=null;typeof a.onUnblock=="function"&&a.onUnblock.call(a.con)}function q(b,a){if(b||g){!a.bindEvents||b&&!a.showOverlay||(b?l(document).bind("mousedown mouseup keydown keypress",a,r):l(document).unbind("mousedown mouseup keydown keypress",r))}}function r(b){var a=b.data;if(l(b.target).parents("div."+a.blockMsgClass).length>0){return true}return l(b.target).parents().children().filter("div.blockUI").length==0}var m=/MSIE/.test(navigator.userAgent),k=/MSIE 6.0/.test(navigator.userAgent),p=l.isFunction(document.createElement("div").style.setExpression);l.tn3block=function(a){t(a)};l.tn3unblock=function(a){u(a)};var g=undefined;l.tn3block.defaults={message:"<h1>Please wait...</h1>",overlayCSS:{},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:2147483647,allowBodyStretch:true,bindEvents:true,showOverlay:true,applyPlatformOpacityRules:true,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",cssID:"tn3"}})(jQuery);(function(a){(a.fn.tn3.External=function(d,e){if(d){this.context=e;this.reqs=d.length;for(var f=0;f<d.length;f++){this.plugs[d[f].origin]=new a.fn.tn3.External[d[f].origin](d[f],this)}}}).prototype={context:null,reqs:0,plugs:{},getImages:function(c,d){this.plugs[c.origin].getImages(c,d)},setAlbumData:function(c,d){this.reqs--;this.context.setAlbumData.call(this.context,c,d)},setImageData:function(d,e,f){this.context.setImageData.call(this.context,d,e,f)},getAlbumData:function(c){return this.context.data[c]}}})(jQuery);